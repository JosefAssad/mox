*** ../generated-files/dbtyper-specific_sag.sql	2015-07-03 13:18:35.694422844 +0200
--- ../patches/dbtyper-specific_sag.org.sql	2015-07-03 13:17:53.898420763 +0200
***************
*** 23,48 ****
  brugervendtnoegle text, 
  afleveret boolean,
  beskrivelse text,
  hjemmel text,
  kassationskode text, 
! offentlighedundtaget offentlighedundtagettype, 
  principiel boolean,
  sagsnummer text,
  titel text,
   virkning Virkning
  );
  
  
  CREATE TYPE SagRelationKode AS ENUM  ('behandlingarkiv','afleveringsarkiv','primaerklasse','opgaveklasse','handlingsklasse','kontoklasse','sikkerhedsklasse','foelsomhedsklasse','indsatsklasse','ydelsesklasse','ejer','ansvarlig','primaerbehandler','udlaanttil','primaerpart','ydelsesmodtager','oversag','praecedens','afgiftsobjekt','ejendomsskat','andetarkiv','andrebehandlere','sekundaerpart','andresager','byggeri','fredning','journalpost');  --WARNING: Changes to enum names requires MANUALLY rebuilding indexes where _as_convert_sag_relation_kode_to_txt is invoked.
  
  CREATE TYPE SagRelationType AS (
    relType SagRelationKode,
    virkning Virkning,
    relMaalUuid uuid,
    relMaalUrn  text,
!   objektType text 
  )
  ;
  
  CREATE TYPE SagRegistreringType AS
  (
--- 23,65 ----
  brugervendtnoegle text, 
  afleveret boolean,
  beskrivelse text,
  hjemmel text,
  kassationskode text, 
! offentlighedundtaget offentlighedundtagetType, 
  principiel boolean,
  sagsnummer text,
  titel text,
   virkning Virkning
  );
  
  
  CREATE TYPE SagRelationKode AS ENUM  ('behandlingarkiv','afleveringsarkiv','primaerklasse','opgaveklasse','handlingsklasse','kontoklasse','sikkerhedsklasse','foelsomhedsklasse','indsatsklasse','ydelsesklasse','ejer','ansvarlig','primaerbehandler','udlaanttil','primaerpart','ydelsesmodtager','oversag','praecedens','afgiftsobjekt','ejendomsskat','andetarkiv','andrebehandlere','sekundaerpart','andresager','byggeri','fredning','journalpost');  --WARNING: Changes to enum names requires MANUALLY rebuilding indexes where _as_convert_sag_relation_kode_to_txt is invoked.
+ CREATE TYPE SagRelationJournalPostSpecifikKode AS ENUM ('journalnotat','vedlagtdokument','tilakteretdokument');
+ 
+ CREATE TYPE JournalNotatType AS (
+ titel text,
+ notat text,
+ format text
+ );
+ 
+ CREATE TYPE JournalPostDokumentAttrType AS (
+ dokumenttitel text,
+ offentlighedUndtaget OffentlighedundtagetType
+ );
+ 
  
  CREATE TYPE SagRelationType AS (
    relType SagRelationKode,
    virkning Virkning,
    relMaalUuid uuid,
    relMaalUrn  text,
!   objektType text,
!   relIndex int,
!   relTypeSpec SagRelationJournalPostSpecifikKode,
!   journalNotat JournalNotatType,
!   journalDokumentAttr JournalPostDokumentAttrType
  )
  ;
  
  CREATE TYPE SagRegistreringType AS
  (
***************
*** 56,62 ****
  (
    id uuid,
    registrering SagRegistreringType[]
  );  
  
! 
  
--- 73,83 ----
  (
    id uuid,
    registrering SagRegistreringType[]
  );  
  
! CREATE Type _SagRelationMaxIndex AS
! (
!   relType SagRelationKode,
!   relIndex int
! );
  
